<!DOCTYPE html><html><head><style></style></head><body><!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-O ÙˆØ³Ø§Ù… Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --primary: #38bdf8; --bg: #0f172a; --card: #1e293b; --x-color: #fbbf24; --o-color: #f87171; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; overflow: hidden; }
        h1 { color: var(--primary); text-shadow: 0 0 10px rgba(56, 189, 248, 0.3); margin-bottom: 5px; }
        #status { margin-bottom: 20px; font-size: 1.2rem; padding: 10px 25px; background: var(--card); border-radius: 50px; border: 1px solid #334155; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .grid { display: grid; grid-template-columns: repeat(3, 90px); gap: 12px; }
        .cell { width: 90px; height: 90px; background: var(--card); border: 2px solid #334155; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 900; cursor: pointer; transition: all 0.2s ease; }
        .cell:hover { transform: translateY(-3px); border-color: var(--primary); background: #243147; }
        .cell.X { color: var(--x-color); text-shadow: 0 0 8px var(--x-color); }
        .cell.O { color: var(--o-color); text-shadow: 0 0 8px var(--o-color); }
        .controls { margin-top: 30px; }
        button { background: var(--primary); color: var(--bg); border: none; padding: 12px 35px; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: 0.3s; }
        button:hover { opacity: 0.9; transform: scale(1.05); }
        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¨Ø³ÙŠØ· Ù„Ù„ÙØ§Ø¦Ø² */
        .winner-cell { background: #064e3b !important; border-color: #10b981 !important; }
    </style>
</head>
<body>

    <h1>ğŸ® ÙˆØ³Ø§Ù… X-O Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ©</h1>
    <div id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...</div>
    
    <div class="grid" id="board">
        <div class="cell" onclick="makeMove(0)"></div>
        <div class="cell" onclick="makeMove(1)"></div>
        <div class="cell" onclick="makeMove(2)"></div>
        <div class="cell" onclick="makeMove(3)"></div>
        <div class="cell" onclick="makeMove(4)"></div>
        <div class="cell" onclick="makeMove(5)"></div>
        <div class="cell" onclick="makeMove(6)"></div>
        <div class="cell" onclick="makeMove(7)"></div>
        <div class="cell" onclick="makeMove(8)"></div>
    </div>

    <div class="controls">
        <button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸ”„</button>
    </div>

    <script>
        // Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø­Ù‚Ùƒ Ø§Ù„Ù„ÙŠ ÙÙŠ Ø§Ù„ØµÙˆØ±
        const firebaseConfig = {
            databaseURL: "https://xoxo-af105-default-rtdb.europe-west1.firebasedatabase.app/"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const gameRef = db.ref('online_game');

        const winPatterns = [
            [0,1,2], [3,4,5], [6,7,8], // Ø£ÙÙ‚ÙŠ
            [0,3,6], [1,4,7], [2,5,8], // Ø¹Ù…ÙˆØ¯ÙŠ
            [0,4,8], [2,4,6]           // Ù‚Ø·Ø±ÙŠ
        ];

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±
        gameRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (!data) { resetGame(); return; }

            const cells = document.querySelectorAll('.cell');
            data.board.forEach((val, i) => {
                cells[i].innerText = val;
                cells[i].className = 'cell ' + (val ? val : '');
            });

            if (data.winner) {
                document.getElementById('status').innerText = data.winner === "Draw" ? "ØªØ¹Ø§Ø¯Ù„! ğŸ¤" : "Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ: " + data.winner + " ğŸ†";
            } else {
                document.getElementById('status').innerText = "Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨: " + data.turn;
            }
        });

        function makeMove(index) {
            gameRef.once('value').then((snapshot) => {
                const data = snapshot.val();
                if (data.winner || data.board[index] !== "") return;

                data.board[index] = data.turn;
                
                // ÙØ­Øµ Ø§Ù„ÙÙˆØ²
                const winner = checkWinner(data.board);
                if (winner) {
                    data.winner = winner;
                } else if (!data.board.includes("")) {
                    data.winner = "Draw";
                } else {
                    data.turn = data.turn === "X" ? "O" : "X";
                }
                
                gameRef.set(data);
            });
        }

        function checkWinner(board) {
            for (let pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    return board[a];
                }
            }
            return null;
        }

        function resetGame() {
            gameRef.set({
                board: ["", "", "", "", "", "", "", "", ""],
                turn: "X",
                winner: null
            });
        }
    </script>
</body>
</html><script></script></body></html>